:root{
    --slot-size: 340px;
    --slot-gap: 36px;
    --card-width: 120px;
    --card-radius: 12px;
    --accent: #4CAF50;
    --danger: #ffdddd;
    --bg: #f4f4f4;
    --slot-border: #bdbdbd;
}

/* Base */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
    font-family: 'Segoe UI', Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
    background-color: var(--bg);
    margin:0; padding:22px; color:#222;
    transition: background-color .35s ease;
}

/* Títulos */
.titulo{
    font-size:1.6rem; margin:0 0 18px 0;
    display:flex; align-items:center; justify-content:center; gap:10px;
}
.icone{ font-size:1.4rem; }
.subtitulo{ margin:18px 0 10px 0; color:#555; font-weight:500; }

/* Painel com slots */
.painel{
    display:flex; justify-content:center; gap:var(--slot-gap);
    margin-bottom:28px; flex-wrap:wrap;
}
.slot{
    width:var(--slot-size); height:var(--slot-size);
    /* O slot começa neutro, a cor é aplicada via JS */
    background-color:#e9e9e9; border:3px dashed var(--slot-border);
    border-radius:14px; position:relative; overflow:hidden;
    /* Ajuste para alinhar o conteúdo no topo (Personagens) */
    display:flex; flex-direction:column; align-items:stretch; justify-content:flex-start;
    padding:12px; transition: background-color .25s ease, border-color .25s ease, transform .15s ease;
    box-shadow:0 2px 6px rgba(0,0,0,.04);
}
.slot.over{ border-color:#7fb3ff; background-color:#eaf6ff; transform: translateY(-4px); }

/* Conteúdo dentro do slot */
.slot .slot-content{
    display:flex; gap:10px; align-items:flex-start; justify-content:center; flex-wrap:wrap;
    width:100%; height:100%; padding:6px;
    /* Adicionado position relative para os efeitos internos funcionarem */
    position: relative;
}

/* Efeitos (coração e fantasma) */
.fx{
    position:absolute; bottom:12px; right:12px; font-size:28px; opacity:0; transform: scale(.6);
    transition: opacity .25s ease, transform .25s ease;
    z-index: 50; /* Garante que os efeitos fiquem por cima dos cards */
    pointer-events: none;
}
.fx.show{ opacity:1; transform: scale(1); }
.fx-heart{ color:#e74c3c; text-shadow: 0 2px 6px rgba(231,76,60,.4); }
.fx-ghost{ color:#4aa3ff; text-shadow: 0 2px 6px rgba(74,163,255,.4); }

/* Paleta de elementos */
.elementos{
    display:flex; justify-content:center; gap:14px; flex-wrap:wrap; margin-top:6px;
}
.card{
    width:var(--card-width); text-align:center; cursor: grab;
    padding:8px; border-radius:var(--card-radius); background-color:#fff; border:1px solid #d0d0d0;
    position:relative; transition: transform .12s ease, box-shadow .12s ease; user-select:none;
}
.card:hover{ transform: translateY(-4px); box-shadow:0 6px 18px rgba(0,0,0,.08); }
.card:active{ cursor: grabbing; } /* Adicionado feedback visual de "grabbing" */

.card img{ width:100%; height:96px; object-fit:contain; display:block; border-radius:8px; background:transparent; }

/* Estilo dos cards quando estão dentro de um slot */
.slot .card{
    width:auto; min-width:72px; max-width:100%; padding:6px; margin:4px;
    border-radius:8px; border:1px solid rgba(0,0,0,.2); background: rgba(255,255,255,.95);
    cursor: default; display:flex; flex-direction:column; align-items:center;
}
.slot .card img{ width:84px; height:auto; object-fit:contain; }

/* Fundos na paleta (mantido o estilo visual) */
#fundoCave{ background-color:#B0B0B0; }
#fundoSala{ background-color:#FFA500; }
#fundoCozinha{ background-color:#ADD8E6; }
.card.fundo span{
    display:block; margin-top:6px; font-size:.85rem; color:#333; font-weight:600; text-align:center;
}


/* Popup */
.popup{
    display:none; position:fixed; inset:0; background: rgba(0,0,0,.55);
    align-items:center; justify-content:center; z-index:60;
}
.popup-content{
    background:#fff; padding:26px; border-radius:12px; width:min(520px,92%); text-align:center;
    box-shadow:0 12px 40px rgba(0,0,0,.18);
}
.popup-content button{
    padding:10px 18px; border-radius:8px; border:none; background:var(--accent); color:#fff; cursor:pointer; font-weight:600;
    margin-top: 15px; /* Espaçamento para o botão */
}
/* Estilos para o botão Avancar, que será manipulado via JS */
button#btnAvancar.hidden {
    display: none;
}


/* Responsivo */
@media (max-width:980px){
    :root{ --slot-size:280px; --card-width:100px; }
    .painel{ gap:18px; }
}
@media (max-width:640px){
    :root{ --slot-size:220px; --card-width:88px; }
    .painel{ flex-direction:column; align-items:center; gap:18px; }
}

/* Estados de erro */
.error-bg{ background-color: var(--danger) !important; transition: background-color .25s ease; }
/* Removida a classe .hidden do CSS, pois usaremos style.display no JS */